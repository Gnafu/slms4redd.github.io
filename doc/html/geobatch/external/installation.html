<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installing and Running GeoBatch &mdash; UNREDD NFMS 1.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/redd.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="UNREDD NFMS 1.0 documentation" href="../../index.html" />
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head>
  <body role="document">
<div class="header">
  <div class="logo">
    <a href="../../index.html">
      <img class="logo" src="../../_static/un-redd.gif" alt="Logo"/>
    </a>
  </div>
  <div class="faologo">
  <table><tr><td>
    <a href="http://www.fao.org/">
      <img class="logo" src="../../_static/fao_logo.gif" alt="FAO"/>
    </a>
	</td><td>

      <img class="logo" src="../../_static/undp_logo.gif" alt="undp"/>
    </td><td>
      <img class="logo" src="../../_static/unep.gif" alt="unep"/>

	</td>
	</td></tr></table>
  </div>

</div>


    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">UNREDD NFMS 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="installing-and-running-gb">
<h1>Installing and Running <em>GeoBatch</em><a class="headerlink" href="#installing-and-running-gb" title="Permalink to this headline">¶</a></h1>
<p><em>GeoBatch</em> is distributed as a standalone java web application archive (<code class="docutils literal"><span class="pre">war</span></code> file), to be used within a Java servlet container.</p>
<div class="section" id="prerequisites-java-and-tomcat">
<h2>Prerequisites: Java and Tomcat<a class="headerlink" href="#prerequisites-java-and-tomcat" title="Permalink to this headline">¶</a></h2>
<p><em>GeoBatch</em> requires <a class="reference external" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Oracle Java SE 6</a> or newer to be installed in your system, and a servlet container. <em>GeoBatch</em> has been tested with <a class="reference external" href="http://tomcat.apache.org/download-60.cgi">Apache Tomcat 6</a> and its use is strongly recommended.</p>
</div>
<div class="section" id="the-configuration-directory">
<h2>The configuration directory<a class="headerlink" href="#the-configuration-directory" title="Permalink to this headline">¶</a></h2>
<p>The configuration directory is where all <em>GeoBatch</em> flow definitions and other configuration files are placed. <em>GeoBatch</em> comes with a default configuration directory with a collection of sample flow configurations, that will be located under <code class="docutils literal"><span class="pre">WEB-INF/data</span></code> in <em>GeoBatch</em>&#8216;s installation.</p>
<p>In production, it is recommended to copy the contents of the configuration directory outside the installation directory, and use the <code class="docutils literal"><span class="pre">GEOBATCH_CONFIG_DIR</span></code> environment variable to tell <em>GeoBatch</em> where to find it.</p>
<p>If you set the <code class="docutils literal"><span class="pre">GEOBATCH_CONFIG_DIR</span></code> the configuration into <code class="docutils literal"><span class="pre">WEB-INF/data</span></code> will be discarded.</p>
<p>To set the <code class="docutils literal"><span class="pre">GEOBATCH_CONFIG_DIR</span></code>, set it as one environment variable in your operating system, <em>or</em> run tomcat with <code class="docutils literal"><span class="pre">-D</span></code> option to define it as a java system property.</p>
<div class="section" id="windows">
<h3>Windows<a class="headerlink" href="#windows" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://tomcat.apache.org/download-60.cgi">Download tomcat</a> and extract the archive into C:\Program Files</p>
<p>Create the directory C:\GEOBATCH_CONFIG</p>
<p>Create a file named setenv.bat in C:\Program Files\apache-tomcat-6.0.35\bin\</p>
<p>Open it and edit the file specifying the geobatch config dir</p>
<div class="highlight-python"><div class="highlight"><pre>set GEOBATCH_CONFIG_DIR=c:\GEOBATCH_CONFIG
</pre></div>
</div>
</div>
<div class="section" id="linux">
<h3>Linux<a class="headerlink" href="#linux" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://tomcat.apache.org/download-60.cgi">Download tomcat</a> and extract the archive into /usr/share/local/</p>
<p>Create the directory /opt/GEOBATCH_CONFIG_DIR</p>
<p>To apply this value every time Tomcat is started, you can set the <code class="docutils literal"><span class="pre">GEOBATCH_CONFIG_DIR</span></code> as a Java system property. Edit the file <code class="docutils literal"><span class="pre">bin/setclasspath.sh</span></code> under the root of the Tomcat installation. Specify the GEOBATCH_CONFIG_DIR system property by setting the CATALINA_OPTS variable using the <code class="docutils literal"><span class="pre">-D</span></code> option:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">CATALINA_OPTS</span><span class="o">=</span><span class="s">&quot;-DGEOBATCH_CONFIG_DIR=/opt/GEOBATCH_CONFIG_DIR $CATALINA_OPTS&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="deploy-and-running">
<h2>Deploy and running<a class="headerlink" href="#deploy-and-running" title="Permalink to this headline">¶</a></h2>
<p>Download <a class="reference external" href="demo.geo-solutions.it/share/github/geobatch/geobatch.war">geobatch.war</a> and copy it to the <code class="docutils literal"><span class="pre">webapps</span></code> directory in tomcat. Tomcat should unpack the web archive and automatically set up and run <em>GeoBatch</em>.</p>
<div class="section" id="configuration-directory-structure">
<h3>Configuration directory structure<a class="headerlink" href="#configuration-directory-structure" title="Permalink to this headline">¶</a></h3>
<p>The configuration directory must contain these files/directory:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">catalog.xml</span></code></li>
</ul>
<p>This file is Mandatory and isn&#8217;t created automatically at <em>GeoBatch</em> startup. You have to create it.
Below there is a basic example:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="nt">&lt;CatalogConfiguration&gt;</span>
        <span class="nt">&lt;id&gt;</span>catalog<span class="nt">&lt;/id&gt;</span>
        <span class="nt">&lt;description&gt;</span>descriptionFileBasedCatalogConfiguration<span class="nt">&lt;/description&gt;</span>
        <span class="nt">&lt;name&gt;</span>nameFileBasedCatalogConfiguration<span class="nt">&lt;/name&gt;</span>
<span class="nt">&lt;/CatalogConfiguration&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">settings</span></code> directory, if doesn&#8217;t exist this directory is autogenerated at startup.</li>
<li>Flow configuration <code class="docutils literal"><span class="pre">*.xml</span></code> files.</li>
<li>Action configuration directories, following the hierarchy explained below, unless specified otherwise in the configuration file.</li>
<li><code class="docutils literal"><span class="pre">temp</span></code> dir, unless explicitly specified otherwise (see <a class="reference internal" href="#the-temporary-directory">The temporary directory</a>) this directory is autogenerated at startup.</li>
</ul>
<p>Each action needs a configuration dir. Its default location is <code class="docutils literal"><span class="pre">GEOBATCH_CONFIG_DIR/FLOW_ID/ACTION_ID</span></code>. Custom locations can be specified inside the flow configuration files:</p>
<ul class="simple">
<li>At <strong>flow level</strong>, using the <code class="docutils literal"><span class="pre">&lt;overrideConfigDir&gt;</span></code> element. It will point to the directory containing all the configuration directories for all the actions in the flow. If the path specified in <code class="docutils literal"><span class="pre">&lt;overrideConfigDir&gt;</span></code> is relative, it will be placed under <code class="docutils literal"><span class="pre">GEOBATCH_CONFIG_DIR</span></code>.</li>
<li>At <strong>action level</strong>. Each action may override its own config dir location, using the <code class="docutils literal"><span class="pre">&lt;overrideConfigDir&gt;</span></code> element. If a relative path is given, it will be placed under its flow-level dir specification.</li>
</ul>
</div>
</div>
<div class="section" id="the-temporary-directory">
<h2>The temporary directory<a class="headerlink" href="#the-temporary-directory" title="Permalink to this headline">¶</a></h2>
<p>The place where <em>GeoBatch</em> Actions will create their temporary files during execution, if not specified otherwise, will be placed in <code class="docutils literal"><span class="pre">temp</span></code> dir under <code class="docutils literal"><span class="pre">GEOBATCH_CONFIG_DIR</span></code>.</p>
<p>The <code class="docutils literal"><span class="pre">GEOBATCH_TEMP_DIR</span></code> environment/system variable can be used to specify another location, the same way as <code class="docutils literal"><span class="pre">GEOBATCH_CONFIG_DIR</span></code>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Make sure that <em>GeoBatch</em> (the running tomcat user) will have write permisions into the temporary directory.</p>
</div>
</div>
<div class="section" id="the-logging-system">
<h2>The logging system<a class="headerlink" href="#the-logging-system" title="Permalink to this headline">¶</a></h2>
<p><em>GeoBatch</em> uses <a class="reference external" href="http://logging.apache.org/log4j/">log4j</a> for logging, and by default is logging at <code class="docutils literal"><span class="pre">INFO</span></code> level, and output will be rolled into <code class="docutils literal"><span class="pre">logs/geobatch.log</span></code>.</p>
<p>To change logging setup, edit <code class="docutils literal"><span class="pre">WEB-INF/log4j.xml</span></code> file. Please refer to <a class="reference external" href="http://logging.apache.org/log4j/1.2/manual.html">log4j&#8217;s manual</a> for details.</p>
</div>
<div class="section" id="manteinance">
<h2>Manteinance<a class="headerlink" href="#manteinance" title="Permalink to this headline">¶</a></h2>
<p><em>GeoBatch</em> will automatically remove the old temporal directories, but some old directories could remain undeleted in case of tomcat restart. Check occasionally for temporal directory size, and for log file sizes, and clean if necessary.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installing and Running <em>GeoBatch</em></a><ul>
<li><a class="reference internal" href="#prerequisites-java-and-tomcat">Prerequisites: Java and Tomcat</a></li>
<li><a class="reference internal" href="#the-configuration-directory">The configuration directory</a><ul>
<li><a class="reference internal" href="#windows">Windows</a></li>
<li><a class="reference internal" href="#linux">Linux</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deploy-and-running">Deploy and running</a><ul>
<li><a class="reference internal" href="#configuration-directory-structure">Configuration directory structure</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-temporary-directory">The temporary directory</a></li>
<li><a class="reference internal" href="#the-logging-system">The logging system</a></li>
<li><a class="reference internal" href="#manteinance">Manteinance</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">UNREDD NFMS 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2012, FAO Forestry &amp; GeoSolutions SAS.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>